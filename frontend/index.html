<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="api-base" content="http://localhost:8000/api/v1">
        <title>JustStreamIt</title>
        <link rel="preload" href="/assets/fonts/oswald-variablefont_wght-webfont.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="stylesheet" href="assets/styles/css/global.css">
    </head>

    <body>
    <!-- Logo and H1 tag -->
    <header class="site-wrap container-fluid site-header py-3" role="banner">
      <div class="d-flex align-items-center
                  justify-content-center justify-content-md-start
                  gap-2 gap-md-5 ps-3 ps-md-4">
        <img id="logo" class="mx-3" src="assets/img/logo.png" alt="JustStreamIt" width="127" height="94">
        <h1 class="brand-title m-0 d-none d-md-block">Vidéos à la demande</h1>
      </div>
    </header>

    <main class="site-wrap container-fluid my-4" role="main">

        <!-- Meilleur Film Section / Best Film Section -->
        <section id="best-film" class="mb-5" aria-labelledby="best-heading">
          <h2 id="best-heading" class="section-title my-4 my-lg-5 text-center text-md-start">Meilleur film</h2>

          <article class="best-block p-3 p-md-4 mt-3">
              <div class="row best-grid gx-0 align-items-stretch">
                <!-- 12 / 5 / 4 -->
                <div class="col-12 col-md-4 ">
                  <figure class="poster-box m-0">
                    <img id="best-img" class="d-block w-100" src="" alt="" loading="eager" referrerpolicy="no-referrer">
                  </figure>
                </div>

                <!-- 12 / 6 / 7  => sums to 11 at md+lg -->
               <div class="col-12 col-md-7 best-textcol">
                  <h3 id="best-title" class="best-title my-2"></h3>
                  <p  id="best-desc"  class="best-desc text-muted mb-3"></p>

                  <div class="best-cta text-center text-lg-end">
                    <button
                            class="jsi-btn jsi-btn--primary"
                            id="best-details-btn"
                            type="button"
                            aria-haspopup="dialog"
                            aria-controls="movieModal"
                            aria-label="Afficher les détails">
                      Détails
                    </button>
                  </div>
                </div>
              </div>
            </article>
        </section>

        <!-- Films les mieux notés (genres mélangés) / Best rated films -->
        <section id="top-rated" aria-labelledby="tr-heading">
            <h2 id="tr-heading" class="section-title my-4 my-lg-5 text-center text-md-start">Films les mieux notés</h2>

            <!-- Grid (JS will populate) -->
            <div
               id="top-rated-grid"
               class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5"
               role="list"
               aria-live="polite"
               aria-busy="false"

               data-count-collapsed-xs="2"
               data-count-expanded-xs="6"
               data-count-collapsed-md="4"
               data-count-expanded-md="6"
               data-count-lg="6"
            >
                <!-- JS inserts .col > .film-card here -->
            </div>

            <!-- Toggle More/Less views (mobile & tablet only) -->
            <div class="d-flex justify-content-center mt-3 d-lg-none">
                <button
                  id="tr-toggle"
                  type="button"
                  class="jsi-btn jsi-btn--toggle justify-content-center"
                  aria-controls="top-rated-grid"
                  aria-expanded="false"
                  data-label-more="Voir plus"
                  data-label-less="Voir moins"
                >
                  Voir plus
                </button>
            </div>
        </section>

        <!-- Films - Genre 1 (Crime) & no dropdown -->
        <section id="genre-one" class="genre-section" aria-labelledby="g1-heading" data-genre="crime">
            <h2 id="genre-one-heading" class="section-title my-4 my-lg-5 text-center text-md-start">Crime</h2>
            <div
               id="grid-genre-one"
               class="genre-one row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5"
               role="list"
               aria-live="polite"
               aria-busy="false"

               data-count-collapsed-xs="2"
               data-count-expanded-xs="6"
               data-count-collapsed-md="4"
               data-count-expanded-md="6"
               data-count-lg="6"
            >
                <!-- Will get filled in by js ---->
            </div>

             <!-- Toggle More/Less views (mobile & tablet only) -->
            <div class="d-flex justify-content-center mt-3 d-lg-none">
                <button
                  id="genre-one-toggle"
                  type="button"
                  class="jsi-btn jsi-btn--toggle justify-content-center"
                  aria-controls="top-rated-grid"
                  aria-expanded="false"
                  data-label-more="Voir plus"
                  data-label-less="Voir moins"
                >
                  Voir plus
                </button>
            </div>
        </section>

        <!-- Films - Genre 2 (Romance) & no dropdown -->
        <section id="genre-two" class="genre-section" aria-labelledby="g2-heading" data-genre="romance">
            <h2 class="section-title my-4 my-lg-5 text-center text-md-start">Romance</h2>
            <div
               id="grid-genre-two"
               class="genre-two row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5"
               role="list"
               aria-live="polite"
               aria-busy="false"

               data-count-collapsed-xs="2"
               data-count-expanded-xs="6"
               data-count-collapsed-md="4"
               data-count-expanded-md="6"
               data-count-lg="6"
            >
                <!-- Will get filled in by js ---->
            </div>

             <!-- Toggle More/Less views (mobile & tablet only) -->
            <div class="d-flex justify-content-center mt-3 d-lg-none">
                <button
                  id="genre-two-toggle"
                  type="button"
                  class="jsi-btn jsi-btn--toggle justify-content-center"
                  aria-controls="top-rated-grid"
                  aria-expanded="false"
                  data-label-more="Voir plus"
                  data-label-less="Voir moins"
                >
                  Voir plus
                </button>
            </div>
        </section>

        <!-- Films - Sorting Frame by Category with dropdown -->
        <section id="filtered-genres" class="genre-section" aria-labelledby="autres-heading">
          <div class="wrapper-w-dropdown my-4 my-lg-5 d-md-flex align-items-center gap-3">
            <h2 id="autres-heading" class="section-title text-center text-md-start m-0">Autres :</h2>

            <!-- Custom dropdown: centered on mobile, right-aligned on md+ -->
            <div class="dropdown-box w-md-auto mt-3 mt-md-0 d-flex">
              <div id="autres-dd" class="autres-dd" data-open="false">
                <button
                  id="autres-dd-button"
                  type="button"
                  class="dd-button"
                  aria-haspopup="listbox"
                  aria-expanded="false"
                  aria-controls="autres-menu"
                >
                  <span id="autres-dd-label">Chargement…</span>
                  <span class="caret" aria-hidden="true"></span>
                </button>

                <ul id="autres-menu" class="dd-menu" role="listbox" tabindex="-1" aria-labelledby="autres-dd-button">
                  <!-- JS inserts <li role="option"> … </li> here -->
                </ul>
              </div>
            </div>
          </div>

          <div
            id="filtered-genres-grid-wrapper"
            class="filtered-genre row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5"
            role="list"
            aria-live="polite"
            aria-busy="false"
            data-count-collapsed-xs="2"
            data-count-expanded-xs="6"
            data-count-collapsed-md="4"
            data-count-expanded-md="6"
            data-count-lg="6"
          ></div>

          <div class="d-flex justify-content-center mt-3 d-lg-none">
            <button
              id="filtered-genres-toggle"
              type="button"
              class="jsi-btn jsi-btn--toggle justify-content-center"
              aria-controls="filtered-genres-grid-wrapper"
              aria-expanded="false"
              data-label-more="Voir plus"
              data-label-less="Voir moins"
            >
              Voir plus
            </button>
          </div>
        </section>
    </main>

    <!-- Movie details modal (Bootstrap) -->
    <div class="modal fade" id="movieModal" tabindex="-1" aria-labelledby="movieModalTitle" aria-hidden="true">
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content jsi-modal">
          <div class="modal-body">
            <!-- Top block: text left / poster right (CSS Grid, no .row/.gx) -->
            <div class="modal-hero">
              <!-- Text column -->
              <div class="text-col d-flex flex-column">
                <h3 id="movieModalTitle" class="best-title mb-3"></h3>

                <div class="film-meta">
                  <p id="mm-year-genres" class="bold-film-detail mb-1"></p>
                  <p id="mm-rated-runtime" class="bold-film-detail mb-1"></p>
                  <p class="bold-film-detail mb-1">
                    <span class="label">IMDB score:&nbsp;</span><span id="mm-imdb"></span>
                  </p>
                  <p class="bold-film-detail mb-1">
                    <span class="label">Recettes au box-office:&nbsp;</span>
                      <span id="mm-boxoffice"></span>
                  </p>
                </div>

                <div class="directors-block pt-3">
                  <p class="directors-label mb-1">Réalisé par:</p>
                  <p id="mm-directors" class="director-names mb-0"></p>
                </div>

                <!-- MOBILE/TABLET-ONLY summary (between meta+directors and the poster) -->
                <div class="modal-summary-inline d-lg-none">
                  <p id="mm-summary-inline" class="mb-0"></p>
                </div>
              </div>

              <!-- Poster column -->
              <div class="poster-col">
                <figure class="poster-box m-0 h-100">
                  <img id="mm-poster" class="d-block w-100 h-100" alt="" referrerpolicy="no-referrer">
                </figure>
              </div>
            </div>

            <!-- DESKTOP summary (full width, shows >= lg) -->
            <div class="modal-summary d-none d-lg-block">
              <p id="mm-summary" class="mb-0"></p>
            </div>

            <!-- Cast -->
            <div class="modal-cast">
              <p class="actors-label mb-1">Avec:</p>
              <p id="mm-actors" class="actors-list mb-0"></p>
            </div>
          </div>

          <div class="modal-footer justify-content-center">
            <button type="button" class="jsi-btn jsi-btn--toggle" data-bs-dismiss="modal" aria-label="Fermer la fenêtre modale">
              Fermer
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 3rd-party runtime (UMD: exposes window.bootstrap and includes Popper) -->
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!-- App bootstrap: renders “Meilleur film” block -->
    <script type="module" src="assets/js/app.js"></script>
    </body>
</html>